Дана фотография нужно построить бинарную (возможно тринарную, об этом дальше) маску которая скажет: небо здесь или не небо. Т.е. Сегментировать небо (про облака минимально нужно хотя бы знать небо это или нет, а лучше знать про них знать облако это или нет, так как с ними может быть проблема - они детализированные и на них могут быть ключевые точки, но они двигаются и это сломает всё сопоставление картинок тем же SIFT-ом).
Небо нужно сегментировать так как когда мы уже пытаемся что то узнать про геометрию сцены, небо всё ломает, ведь оно на бесконечной глубине (это отличает небо от случая какой нибудь однородной стены, хоть на ней и нет ключевых точек но мы можем ее реконструировать, понять геометрию стены) 
* потенциально что похоже на небо по "плохости" (мб машины и тп)

Явно стоит попробовать:
* Segment anything (работает вроде просто потрясающе, я не знаю что там по скорости, но это просто топ), понятно что если ищем облака, а умеем отделать только небо от не неба, то можем внутри неба снова запустить сегментацию
	* Нужно понять формат работы segment anything и что он выдаёт, если просто куча классов, то нужно понять как выбирать из них небо
		* You can train or fine-tune SAM 2 on custom datasets of images, videos, or both. Please check the training [README](https://github.com/facebookresearch/sam2/blob/main/training/README.md) on how to get started
	* кажется требует некоторый промпт (тыкнуть в область, начиная с нее выделит сегмент), нужно от этого избавиться и иметь все сегменты или придумать предобработку чтоб знать куда тыкать в поисках неба
		* очевидное решение: какие то цветовые границы (учитывая всю цветовую гамму изображения понять в каких границах был бы средний цвет неба) [[РешениеЦветовыеГраницы]]
		* использовать готовый классификатор, причем он должен быть очень легким (возможно легче самому его обучить)
			*  [[РешениеКлассификатор]]
			* DINO
		* Аналитическое решение, как то блуждать по сегменту и так определить небо это или нет
	* сколько видеопамяти требует? Если много, можно ли уменьшить зная что задача более узкая? 
* было бы хорошо собрать датасет из наиболее частых случаев, потом фотки из контекста фотограмметрии (датасет это важно)
	* явно плохой случай: туманность когда горизонт плавно переходит в небо, то есть четко отделить нельзо Землю от неба 
	* арки и другие случаи, когда небо разделено на несколько компонент связности
	* обычные случаи которые поделятся на два типа: просто от людей и из фотограмметрии
* другие готовые решения 
